## 47-Errors and exceptions

https://docs.python.org/3/tutorial/errors.html

Errors and Exceptions

```py
def causeError():
    return 1/0

causeError()

# ZeroDivisionError: division by zero
```

```py
def causeError():
    return 1/0

def callCauseError():
    return causeError()

callCauseError()

# ZeroDivisionError: division by zero
```

Try / Except

```py
try:
    1/0
except Exception as e:
    print(type(e))

# <class 'ZeroDivisionError'>
```

## 48-Handling exceptions

### Try / Except

```py
def causeError():
    try:
        return 1/0
    except Exception as e:
        return e
    
causeError()

# ZeroDivisionError('division by zero')

def causeError():
    try:
        return 1/0
    except Exception:
        print('There was some sort of error!')
    
causeError()

# There was some sort of error!

```

### Finally

```py
def causeError():
    try:
        return 1/1
    except Exception:
        print('There was some sort of error!')
    finally:
        print('This will always execute!')
        # эта строка выводится всегда:
        # и при ошибке, и без ошибки.
        # полезно при расчитывании выполнения времени функции - следующий пример
    
causeError()

# This will always execute!
# 1.0 - ошибки нет, вычислено 1

import time

def causeError():
    # текущее время - в переменную start
    start = time.time()
    try:
        # приоcтановили выполнение на полсекунды
        time.sleep(0.5)
        # ошибка вызовет исключение
        return 1/0
    except Exception:
        print('There was some sort of error!')
    finally:
        # текущее время минус начальное
        print(f'Function took {time.time() - start} seconds to execute')
    
causeError()

# There was some sort of error!
# Function took 0.504910945892334 seconds to execute

```

### Catching Exceptions by Type  

Здесь вызывается то исключение, которое наиболее подходит. Будет вызвано первое подходящее, поэтому обычно исключения общего формата ставят в конце, а конкретные исключения выше.  

```py

def causeError():
    try:
        return 1/0

    except TypeError:
        print('There was a type error!')
    except ZeroDivisionError:
        print('There was a zero division error!')
    except Exception:
        print('There was some sort of error!')

    
causeError()
# There was a zero division error!

def causeError():
    try:
        return 1 + 'a'

    except TypeError:
        print('There was a type error!')
    except ZeroDivisionError:
        print('There was a zero division error!')
    except Exception:
        print('There was some sort of error!')

    
causeError()
# There was a type error!
```

### Custom Decorators

```py
def handleException(func):
    def wrapper(*args):
        try:
            func(*args)
        except TypeError:
            print('There was a type error!')
        except ZeroDivisionError:
            print('There was a zero division error!')
        except Exception:
            print('There was some sort of error!')
    return wrapper

@handleException
def causeError():
    return 1/0

causeError()

# There was a zero division error!
```

### Raising Exceptions

```py
@handleException
def raiseError(n):
    if n == 0:
        raise Exception()
    # else тут отстутствует, т.к. 
    # если выполнится Exception(),
    # вся функция прервётся.
    print(n)
    
raiseError(1)

# 1
```

## 049-Custom exceptions

Custom Exceptions

```py
class CustomException(Exception):
    pass


def causeError():
    raise CustomException('You called the causeError function!')
    
causeError()

# Traceback (most recent call last)
# CustomException: You called the causeError function!
```

Adding Attributes

```py
class HttpException(Exception):
    statusCode = None
    message = None
    def __init__(self):
        super().__init__(f'Status code: {self.statusCode} and message is: {self.message}')
        
class NotFound(HttpException):
    statusCode = 404
    message = 'Resource not found'
    
class ServerError(HttpException):
    statusCode = 500
    message = 'The server messed up!'
    
def raiseServerError():
    raise ServerError()
    
raiseServerError()

# Traceback (most recent call last)
# ServerError: Status code: 500 and message is: The server messed up!
```

---
